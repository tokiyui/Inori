<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setlist Information</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }
    table {
        border-collapse: collapse;
        width: 100%;
    }
    th, td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>
<label for="tourSelect">Choose a Tour:</label>
<select id="tourSelect" onchange="displaySetlist()">
    <option value="">Select a Tour</option>
    <option value="Inori Minase LIVE TOUR 2018 BLUE COMPASS">Inori Minase LIVE TOUR 2018 BLUE COMPASS</option>
    <option value="Inori Minase LIVE TOUR 2019 Catch the Rainbow!">Inori Minase LIVE TOUR 2019 Catch the Rainbow!</option>
    <option value="Inori Minase LIVE TOUR 2021 HELLO HORIZON">Inori Minase LIVE TOUR 2021 HELLO HORIZON</option>
    <option value="Inori Minase LIVE TOUR 2022 glow">Inori Minase LIVE TOUR 2022 glow</option>
    <option value="Inori Minase LIVE TOUR 2023 SCRAP ART">Inori Minase LIVE TOUR 2023 SCRAP ART</option>
</select>

<div id="setlistDetails"></div>

<script>
function loadJSON(url, callback) {
    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', url, true);
    xobj.onreadystatechange = function () {
        if (xobj.readyState == 4 && xobj.status == "200") {
            callback(JSON.parse(xobj.responseText));
        }
    };
    xobj.send(null);
}

function displaySetlist() {
    const selectedTour = document.getElementById("tourSelect").value;

    if (selectedTour === "") {
        document.getElementById("setlistDetails").innerHTML = "";
        return;
    }

    loadJSON('setlist.json', function(data) {
        const matchingData = data.filter(item => item.tourtitle === selectedTour);

        if (matchingData.length === 0) {
            document.getElementById("setlistDetails").innerHTML = '<p>No setlist information available for this tour.</p>';
            return;
        }

        const tableHeaders = `
            <tr>
                <th>LIVE Title</th>
                <th>Date</th>
                <th>Venue</th>
                <th>Setlist</th>
                <th>Encore</th>
                <th>Wencore</th>
            </tr>
        `;

        const tableRows = matchingData.map(item => `
            <tr>
                <td>${item.LIVEtitle}</td>
                <td>${item.date}</td>
                <td>${item.venue}</td>
                <td>${item.setlist.join('<br>')}</td>
                <td>${item.encore.join('<br>')}</td>
                <td>${item.Wencore}</td>
            </tr>
        `).join('');

        const table = `
            <table>
                ${tableHeaders}
                ${tableRows}
            </table>
        `;

        document.getElementById("setlistDetails").innerHTML = table;
    });
}
</script>
</body>
</html>
