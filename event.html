<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>

<body>

    <div>
        <label for="yearCheckboxes">年</label>
        <input type="checkbox" id="year2010" value="2010">2010
        <input type="checkbox" id="year2011" value="2011">2011
        <input type="checkbox" id="year2012" value="2012">2012
        <input type="checkbox" id="year2013" value="2013">2013
        <input type="checkbox" id="year2014" value="2014">2014
        <input type="checkbox" id="year2015" value="2015">2015
        <input type="checkbox" id="year2016" value="2016">2016
        <input type="checkbox" id="year2017" value="2017">2017
        <input type="checkbox" id="year2018" value="2018">2018
        <input type="checkbox" id="year2019" value="2019">2019
        <input type="checkbox" id="year2020" value="2020">2020
        <input type="checkbox" id="year2021" value="2021">2021
        <input type="checkbox" id="year2022" value="2022">2022
        <input type="checkbox" id="year2023" value="2023">2023
        <input type="checkbox" id="year2024" value="2024">2024
    </div>
    <div>
        <label for="monthCheckboxes">月</label>
        <input type="checkbox" id="month1" value="1">1
        <input type="checkbox" id="month2" value="2">2
        <input type="checkbox" id="month3" value="3">3
        <input type="checkbox" id="month4" value="4">4
        <input type="checkbox" id="month5" value="5">5
        <input type="checkbox" id="month6" value="6">6
        <input type="checkbox" id="month7" value="7">7
        <input type="checkbox" id="month8" value="8">8
        <input type="checkbox" id="month9" value="9">9
        <input type="checkbox" id="month10" value="10">10
        <input type="checkbox" id="month11" value="11">11
        <input type="checkbox" id="month12" value="12">12
    </div>    
    
    <table id="eventTable">
        <tr>
            <th>年</th>
            <th>月</th>
            <th>日</th>
            <th>曜日</th>
            <th>時刻</th>
            <th>大分類</th>
            <th>中分類</th>
            <th>小分類</th>
            <th>タイトル</th>
            <th>詳細タイトル</th>
            <th>都道府県</th>
            <th>会場</th>
            <th>with</th>
            <th>備考</th>
            <th>セットリスト</th>
        </tr>
    </table>

    <script>
        fetch('event.json')
            .then(response => response.json())
            .then(data => {
                const eventTable = document.getElementById('eventTable');

                function populateTable(data) {
                    eventTable.innerHTML = '<tr><th>年</th><th>月</th><th>日</th><th>曜日</th><th>時刻</th><th>大分類</th><th>中分類</th><th>小分類</th><th>タイトル</th><th>詳細タイトル</th><th>都道府県</th><th>会場</th><th>with</th><th>備考</th><th>セットリスト</th></tr>';

                    data.forEach(event => {
                        const row = eventTable.insertRow(-1);
                        row.insertCell().textContent = event.Year;
                        row.insertCell().textContent = event.Month;
                        row.insertCell().textContent = event.Day;
                        row.insertCell().textContent = event.Weekday;
                        row.insertCell().textContent = event['Start Time'];
                        row.insertCell().textContent = event.class1;
                        row.insertCell().textContent = event.class2;
                        row.insertCell().textContent = event.class3;
                        row.insertCell().textContent = event.title;
                        row.insertCell().textContent = event.title2;
                        row.insertCell().textContent = event.prefecture;
                        row.insertCell().textContent = event.Venue;
                        row.insertCell().textContent = event.sponsor;
                        row.insertCell().textContent = event.info;
                        row.insertCell().textContent = event.id;
                    });
                }

                populateTable(data);

                const checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const selectedYears = [...document.querySelectorAll('input[type="checkbox"][id^="year"]:checked')].map(cb => cb.value);
                        const selectedMonths = [...document.querySelectorAll('input[type="checkbox"][id^="month"]:checked')].map(cb => cb.value);

                        const filteredData = data.filter(event => 
                            (selectedYears.length === 0 || selectedYears.includes(event.Year)) && 
                            (selectedMonths.length === 0 || selectedMonths.includes(event.Month))
                        );
                        populateTable(filteredData);
                    });
                });
            })
            .catch(error => console.error('Error:', error));
    </script>

</body>

</html>
